<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.9.8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: Roadmap and Changelog</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript" src="../../toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.init()
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('da/d9a/md_en_2userver_2roadmap__and__changelog.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Roadmap and Changelog</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md373"></a> We keep an eye on all the issues and feature requests at the <a href="https://github.com/userver-framework">github.com/userver-framework</a>, at the <a href="https://t.me/userver_en">English-speaking</a> and <a href="https://t.me/userver_ru">Russian-speaking</a> Telegram support chats. All the good ideas are discussed, big and important ones go to the Roadmap. We also have our in-house feature requests, those could be also found in Roadmap.</p>
<p>Important or interesting features go to the changelog as they get implemented. Note that there's also a <a class="el" href="../../db/dde/md_en_2userver_2security__changelog.html">Security Changelog</a>.</p>
<p>Changelog news also go to the <a href="https://t.me/userver_news">userver framework news channel</a>.</p>
<h1><a class="anchor" id="autotoc_md374"></a>
Roadmap</h1>
<ul>
<li>Add YDB driver.</li>
<li>Add PostgreSQL connection pools control via Congestion Control.</li>
<li>Add retry budget or retry circuit breaker for clients.</li>
<li>Add web interface to the <a href="https://github.com/userver-framework/uservice-dynconf">uservice-dynconf</a></li>
<li>Add basic Kafka driver.</li>
</ul>
<h1><a class="anchor" id="autotoc_md375"></a>
Changelog</h1>
<h2><a class="anchor" id="autotoc_md376"></a>
Release v1.0.0</h2>
<p>Big new features since the Beta announcement:</p>
<ul>
<li>Implemented WebSockets server</li>
<li>Added MySQL driver</li>
<li>RabbitMQ drived was added</li>
<li>Implemented TLS server</li>
<li>Enabled PostgreSQL pipelining</li>
<li>Implemented and enabled Deadline Propagation</li>
<li>Improved experience with metrics. Added Prometheus and Graphite metric formats. Provided a modern simple interface to write and test metrics.</li>
<li>Added chaos tests for drivers</li>
<li>Implemented streaming API for the HTTP</li>
<li>Improved documentation, added more samples and descriptions, improved search.</li>
<li>Numerous optimizations.</li>
<li>Numerous build improvements, including Conan and Docker support.</li>
</ul>
<p>Optimized and improved features that were available at the Beta announcement:</p>
<ul>
<li>gRPC client and server</li>
<li>Mongo driver</li>
<li>Redis driver</li>
<li>PostgreSQL</li>
<li>HTTP server and client</li>
<li>Logging and Tracing</li>
<li>... and many other features.</li>
</ul>
<p>Detailed descriptions could be found below.</p>
<h2><a class="anchor" id="autotoc_md377"></a>
Beta (September 2023)</h2>
<ul>
<li>WebSockets server and TLS server are now implemented as part of the <a class="el" href="../../df/d94/md_en_2userver_2http__server.html">HTTP server</a></li>
<li>PostgreSQL pipelining is now implemented and turned on by default, leading to improved response times.</li>
<li><a class="el" href="../../d7/d65/md_en_2userver_2mongodb.html">Mongo Congestion Control</a> is implemented and turned on by default, leading to better stability of the service in case of high load on database.</li>
<li>Initial logger is now initialized from the component config, leading to a more simple code and setup. The <code>--initial-logger</code> option now does nothing and will be removed soon.</li>
<li>Added a <a class="el" href="../../df/d07/md_en_2userver_2functional__testing.html">`userver_testsuite_add_simple()`</a> CMake function to simplify testsuite CMake configuration.</li>
<li>Expanded list of HTTP codes, thanks to <a href="https://github.com/Liteskarr">Vladimir Popov</a> for the PR!</li>
<li>Projects from <a href="https://academy.yandex.ru/schools">Yandex Schools</a> were updated by the original authors. Thanks to <a href="https://github.com/bshirokov">bshirokov</a>, <a href="https://github.com/bashkirian">Almaz Shagiev</a>, <a href="https://github.com/KonstantinAntoniadi">Konstantin Antoniadi</a>, <a href="https://github.com/mnink275">Mingaripov Niyaz</a>, <a href="https://github.com/bookWorm21">Ilya Golosov</a> and all the participants for the the great work and PRs!</li>
<li>Build:<ul>
<li>New versions of <code>yaml-cpp</code> library are now supported. Thanks to <a href="https://github.com/rtkid-nik">Nikita</a> for the bug report!</li>
<li>Supported compilation with fmt 10.1.0. Thanks to <a href="https://github.com/vnepogodin">Vladislav Nepogodin</a> for the PRs!</li>
<li>Fixed unused result warning. Thanks to <a href="https://github.com/vnepogodin">Vladislav Nepogodin</a> for the PR!</li>
<li>Fixed use of deprecated API. Thanks to <a href="https://github.com/vnepogodin">Vladislav Nepogodin</a> for the PR!</li>
<li>Fixed build with GCC-13 libstdc++. Thanks to <a href="https://github.com/vnepogodin">Vladislav Nepogodin</a> for the PR!</li>
<li>Fixed MacOS Protobuf discovery. Thanks to <a href="https://github.com/pavelbezpravel">Pavel Talashchenko</a> for the PR!</li>
<li>Fixed multiple other build warnings and issues.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md378"></a>
Beta (August 2023)</h2>
<ul>
<li>Deadline Propagation is now implemented and <a class="el" href="../../d6/d64/md_en_2userver_2deadline__propagation.html">documented</a>.</li>
<li>Projects from <a href="https://academy.yandex.ru/schools">Yandex Schools</a>:<ul>
<li>Documentation was redesigned by <a href="https://github.com/hellenisaeva">hellenisaeva</a> and <a href="https://github.com/MariaGrinchenko">MariaGrinchenko</a>; new design was made up by <a href="https://github.com/atlz253">Fedor Alekseev</a>, <a href="https://github.com/fleshr">fleshr</a>, <a href="https://github.com/ZenkoWu">Anna Zagrebaylo</a>, <a href="https://github.com/InfinityScripter">Michael Talalaev</a>; the whole process was managed by <a href="https://github.com/0GE1">Oleg Komarov</a> with feedback from marketing specialist <a href="https://github.com/makachusha">makachusha</a>. Many thanks to all the participants for the great work.</li>
<li>Implemented initial API for RFC 7616 - HTTP Digest Access Authentication, thanks to <a href="https://github.com/bashkirian">Almaz Shagiev</a>, <a href="https://github.com/KonstantinAntoniadi">Konstantin Antoniadi</a>, <a href="https://github.com/bookWorm21">Ilya Golosov</a>, and <a href="https://github.com/mnink275">Niyaz</a> for multiple PRs!</li>
<li>std::bitset&lt;N&gt;, std::array&lt;bool, N&gt;, userver::utils::Flags&lt;Enum&gt; and integral values are now mapped to PostgreSQL bit and bit varying types. Thanks to <a href="https://github.com/dsaa27">dsaa27</a> and <a href="https://github.com/bshirokov">bshirokov</a> for the PRs!</li>
<li>Initial <code>Realmedium</code> sample was implemented and moved into a separate repository at <a href="https://github.com/userver-framework/realmedium_sample">userver-framework/realmedium_sample</a>. Thanks to <a href="https://github.com/berholz">berholz</a>, <a href="https://github.com/rumxcola">rumxcola</a>, <a href="https://github.com/rumxcola">Konstantin Artemev</a>, <a href="https://github.com/GasikPasik">GasikPasik</a>, <a href="https://github.com/etoanita">Anna Volkova</a>, <a href="https://github.com/NikitaSemenov1">Nikita Semenov</a>, <a href="https://github.com/Riferus">Daniil Boriskin</a>, <a href="https://github.com/VVendor">VVendor</a> for the PR!</li>
</ul>
</li>
<li>Metrics for CPU usage of particular threads of task processors are now available via new <a class="el" href="../../d5/d0e/classengine_1_1TaskProcessorsLoadMonitor.html" title="Component to monitor CPU usage for every TaskProcessor present in the service, and dump per-thread st...">engine::TaskProcessorsLoadMonitor</a> component.</li>
<li>gRPC and HTTP handler metrics were switched to <a class="el" href="../../d2/d1b/structutils_1_1statistics_1_1Rate.html">utils::statistics::Rate</a>, leading to better handling of service start/stop by metrics storage.</li>
<li><a class="el" href="../../d0/d68/classserver_1_1Server.html">server::Server</a> now returns HTTP header "Content-Type: application/octet-stream" if the content type was not set.</li>
<li>Implemented <code>ToString(<a class="el" href="../../d4/d67/classutils_1_1StrongTypedef.html" title="Strong typedef for a type T.">utils::StrongTypedef</a>&lt;floating point&gt;)</code>, thanks to <a href="https://github.com/danilshvalov">Daniil Shvalov</a> for the PR.</li>
<li>Optimizations:<ul>
<li>Signifiacally optimized JSON DOM access to a non-existing element.</li>
<li>Logging now does not lock a mutex in fs-task-processor on each log record.</li>
<li>Up to 3 times faster logging due to multiple minor tweaks with data copy and memory prereserving.</li>
<li>The new asynchronous engine::io::sys::linux::Inotify driver for Linux allows subscriptions to filesystem events. Thanks to it the <a class="el" href="../../d7/d47/classfs_1_1FsCacheClient.html" title="Class client for storing files in memory Usually retrieved from components::FsCache">fs::FsCacheClient</a> now reacts faster.</li>
</ul>
</li>
<li>Docs:<ul>
<li><a class="el" href="../../da/d24/md_en_2userver_2tutorial_2auth__postgres.html">Custom Authorization/Authentication via PostgreSQL</a> now provides a PostgreSQL migrations sample.</li>
<li>Fixed broken refs to hello_service page, thanks to <a href="https://github.com/eoan-ermine">Danil Sidoruk</a> for the PR!</li>
<li><a class="el" href="../../d7/d67/group__userver__universal.html">Universal</a> group was added with information on contents of <code>userver-universal</code> CMake target.</li>
<li>Documented <a class="el" href="../../d9/dac/md_en_2userver_2service__monitor.html">PostgreSQL metrics</a></li>
</ul>
</li>
<li>Build:<ul>
<li>Dropped spdlog dependency</li>
<li><a href="https://github.com/cpm-cmake/CPM.cmake">CPM library</a> is now used for managing third-party dependencies.</li>
<li>Fixed cryptopp compilation error, thanks to <a href="https://github.com/danilshvalov">Daniil Shvalov</a> for the PR!</li>
<li>Fixed -Wsign-conversion -Wctad-maybe-unsupported warnings in <a class="el" href="../../d9/dbf/classutils_1_1TrivialBiMap.html" title="Bidirectional unordered map for trivial types, including string literals; could be efficiently used a...">utils::TrivialBiMap</a>, thanks to <a href="https://github.com/darktime78">darktime78</a> for the PR!</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md379"></a>
Beta (July 2023)</h2>
<ul>
<li><a class="el" href="../../d1/dc3/classserver_1_1http_1_1CustomHandlerException.html" title="An extension of server::handlers::CustomHandlerException that allows to specify a custom HttpStatus.">server::http::CustomHandlerException</a> now allows to provide a custom HTTP status that is not mapped to protocol-agnostic <a class="el" href="../../d2/d24/namespaceserver_1_1handlers.html#ab868a1e6cf573e2728f59d318078e265">server::handlers::HandlerErrorCode</a>.</li>
<li>Non-coroutine <code>userver-universal</code> CMake target was refactored and is now used by the whole framework as a basic dependency. Compile times dropped down drastically for building the whole framework from scratch.</li>
<li>Added a non-coroutine usage example <a class="el" href="../../d2/dfc/md_en_2userver_2tutorial_2json__to__yaml.html">Non-Coroutine Console Tool</a>.</li>
<li>It is now possible to subscribe to <code>SIGUSR1</code> and <code>SIGUSR2</code> in the same class. Thanks to <a href="https://github.com/Beshkent">Beshkent</a> for the bug report.</li>
<li>Dynamic config management commands were added to <code>uctl</code> tool.</li>
<li>Optimizations:<ul>
<li><a class="el" href="../../d6/d2d/classstorages_1_1redis_1_1SubscribeClient.html" title="Client that allows subscribing to Redis channel messages.">storages::redis::SubscribeClient</a> subscriptions were optimized to do less dynamic allocations on new message and use a faster lock-free queue.</li>
<li>Escaping of tags for logging is now done at compile-time by default, which gives up to 30% speedup in some cases.</li>
<li>Internal asynchronous logging logic was rewritten, leading to better scalability and more than 25% speedup.</li>
<li>HTTP client connection is now preserved on deadline, leading to less connections being reopened.</li>
</ul>
</li>
<li>Cleaned up and added docs for <a class="el" href="../../d2/ded/structredis_1_1CommandControl.html" title="Redis command execution options.">redis::CommandControl</a>.</li>
<li>MacOS build instructions were enhanced, thanks to <a href="https://github.com/danilshvalov">Daniil Shvalov</a> for the PR!</li>
<li>Conan build was fixed, thanks to <a href="https://github.com/ybogo">Yuri Bogomolov</a> for the PR.</li>
<li>Numerous build and configure fixes.</li>
</ul>
<h2><a class="anchor" id="autotoc_md380"></a>
Beta (June 2023)</h2>
<ul>
<li>Static configs of the service now can retrieve environment variables via the <code>#env</code> syntax. See <a class="el" href="../../d3/d6c/classyaml__config_1_1YamlConfig.html" title="Datatype that represents YAML with substituted variables.">yaml_config::YamlConfig</a> for more examples.</li>
<li>New testsuite plugins userver_config_http_client and userver_config_testsuite_support turned on by default to increase timeouts in tests and make the functional tests more reliable.</li>
<li>gRPC now can write access logs, see <code>access-tskv-logger</code> static option of <a class="el" href="../../d7/d9a/classugrpc_1_1server_1_1ServerComponent.html" title="Component that configures and manages the gRPC server.">ugrpc::server::ServerComponent</a>.</li>
<li>Now the waiter is allowed to destroy the <a class="el" href="../../d8/d87/classengine_1_1SingleConsumerEvent.html" title="A multiple-producers, single-consumer event.">engine::SingleConsumerEvent</a> immediately after exiting WaitForEvent, if the wait succeeded.</li>
<li>New dynamic_config_fallback_patch fixture could be used to replace some dynamic config values specifically for testsuite tests.</li>
<li>Fixed <a class="el" href="../../d8/d11/classutils_1_1SmallString.html" title="An alternative to std::string with a custom SSO (small string optimization) container size....">utils::SmallString</a> tests, thanks to <a href="https://github.com/GestaltEngine">Chingiz Sabdenov</a> for the PR!</li>
<li>Optimizations:<ul>
<li>Counters in the tasks were optimized. New thread local counters use less CPU and scale better on huge amounts of coroutines.</li>
<li>engine::TaskProcessor optimized layout with interference shielded atomics uses less CPU and scales better on huge amounts of coroutines.</li>
<li>Minor optimizations for HTTP clients URL manipulations.</li>
<li><a class="el" href="../../d7/d1a/classtracing_1_1Span.html" title="Measures the execution time of the current code block, links it with the parent tracing::Spans and st...">tracing::Span</a> generation of ID was made faster.</li>
<li><a class="el" href="../../de/df5/classclients_1_1http_1_1Request.html" title="Class for creating and performing new http requests.">clients::http::Request</a> now does less atomic counters increments/decrements while the request is being built.</li>
<li><code>mlock_debug_info</code> static configuration option of <a class="el" href="../../dc/d21/classcomponents_1_1ManagerControllerComponent.html" title="Component that prepares the engine internals and starts all the other components.">components::ManagerControllerComponent</a> is now on by default. It improves responsiveness of the service under heavy load on low memory and bad hard drives.</li>
<li><a class="el" href="../../dd/dcf/classengine_1_1io_1_1Socket.html" title="Socket representation.">engine::io::Socket</a> now has an additional <code>SendAll</code> overload that accepts <code>const struct iovec* list, std::size_t list_size</code> for implementing low-level vector sends. Mongo driver now uses the new function, resulting in smaller CPU and memory consumption.</li>
<li>clients::http::Form::AddContent now instead of <code>const std::string&amp;</code> parameters accepts <code>std::string_view</code> parameters that allow to copy less data.</li>
</ul>
</li>
<li>Docs and diagnostics:<ul>
<li>gRPC metrics were documented.</li>
<li>New documentation page <a class="el" href="../../df/d94/md_en_2userver_2http__server.html">HTTP, HTTPS, WebSocket</a>.</li>
<li>More debug logs for the Mongo error, thanks to <a href="https://github.com/fominartem0">fominartem0</a> for the PR.</li>
<li>Improved diagnostics for CurrentSpan() and testsuite tasks.</li>
<li>Multiple typos fixed at <a class="el" href="../../da/d26/md_en_2userver_2framework__comparison.html">Feature Comparison with other Frameworks</a> page, thanks to <a href="https://github.com/technothecow">Michael</a> for the PR.</li>
</ul>
</li>
<li>Build:<ul>
<li>Multiple build fixes for gRPC targets.</li>
<li>Clickhouse for Conan was added, thanks to <a href="https://github.com/Jihadist">Anton</a> for the PR.</li>
<li>CMake build flag <code>USERVER_FEATURE_UBOOST_CORO</code> can be used to use system boost::context.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md381"></a>
Beta (May 2023)</h2>
<ul>
<li>New scripts/uctl/uctl console script for administration of the running service was added.</li>
<li>Improved compile times by removing multiple includes from userver headers including templating the serializers of different formats.</li>
<li>Implemented ugrpc::server::HealthComponent handler, a gRPC alternative to <a class="el" href="../../d7/d6d/classserver_1_1handlers_1_1Ping.html" title="Handler that returns HTTP 200 if the service is OK and able to process requests.">server::handlers::Ping</a>.</li>
<li>gRPC server and clients now support middlewares - a customization plugins that could be shared by different handlers.</li>
<li>Invalid implementations of CacheUpdateTrait::Update are now detected and logged.</li>
<li>Optimizations:<ul>
<li>Significant improvements in HTTP handling due to new <a href="http::headers::HeaderMap">http::headers::HeaderMap</a> usage instead of std::unordered_map.</li>
<li>Improved performance of <a class="el" href="../../d9/dbf/classutils_1_1TrivialBiMap.html" title="Bidirectional unordered map for trivial types, including string literals; could be efficiently used a...">utils::TrivialBiMap</a> by an order of magnitude for enum-to-enum mappings, thanks to <a href="https://github.com/Tytskiy">Vlad Tytskiy</a> for the bug report!</li>
<li><a class="el" href="../../d6/d84/namespaceutils.html#a703c865514d1d674e7bf30c212cb8779" title="Extract the number contained in the string. No space characters or other extra characters allowed....">utils::FromString</a> now uses std::from_chars for better performance.</li>
<li>TESTPOINT and other testpoint related macro now imply zero overhead if testpoints were disabled in static config.</li>
<li>More functions of <a class="el" href="../../d2/daa/classformats_1_1json_1_1ValueBuilder.html" title="Builder for JSON.">formats::json::ValueBuilder</a> now accept std::string_view, resulting in less std::string constructions and better performance.</li>
<li>TSKV escaping was optimized via SIMD, resulting in up to x10 speedup on long logs.</li>
<li><code>mlock_debug_info</code> static configuration option of <a class="el" href="../../dc/d21/classcomponents_1_1ManagerControllerComponent.html" title="Component that prepares the engine internals and starts all the other components.">components::ManagerControllerComponent</a> now allows to lock exception unwinding information in memory. It improves responsiveness of the service under heavy load on low memory and bad hard drives.</li>
</ul>
</li>
<li>Docs:<ul>
<li>Some metrics were documented, a human-readable format of metrics is now used in documentation. See <a class="el" href="../../d9/dac/md_en_2userver_2service__monitor.html">Service Statistics and Metrics (Prometheus/Graphite/...)</a>.</li>
<li>Custom 404 page.</li>
<li>New pages, including <a class="el" href="../../de/d61/md_en_2userver_2faq.html">Frequently Asked Questions</a>, <a class="el" href="../../d7/dc4/md_en_2userver_2periodics.html">Periodics and DistLocks</a> and <a class="el" href="../../d2/d58/md_en_2userver_2deploy__env.html">Deploy Environment Specific Configurations</a>.</li>
</ul>
</li>
<li>Build:<ul>
<li>Arch Linux instructions were improved, thanks to <a href="https://github.com/lirik90">Kirill Zimnikov</a> for the PR!</li>
<li>Fixed Conan based builds, thanks to <a href="https://github.com/Jihadist">Anton</a> for the PR.</li>
<li>Clickhouse-cpp version was raised to 2.4.0, thanks to <a href="https://github.com/lirik90">Kirill Zimnikov</a> for the PR!</li>
<li>Fixed build on libstdc++ from GCC-13, thanks to <a href="https://github.com/lirik90">Kirill Zimnikov</a> for the PR!</li>
<li>Fixed benchmarks build on non x86 targets.</li>
<li>Rewrite of Protobuf and gRPC locating logic.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md382"></a>
Beta (April 2023)</h2>
<ul>
<li>MySQL driver was added, see <a class="el" href="../../db/d3d/mysql_driver.html">MySQL Driver - EXPERIMENTAL</a>.</li>
<li>Experimental support for HTTP "Baggage" header is implemented, including verification, forwarding from HTTP handlers to client, baggage manipulation. See <a class="el" href="../../d5/d40/classbaggage_1_1BaggageManagerComponent.html" title="Component for relationship with header baggage.">baggage::BaggageManagerComponent</a> for more info.</li>
<li>Redis driver now supports non-queued variants for pubsub.</li>
<li>Redis driver now supports read-only transactions.</li>
<li><a class="el" href="../../d2/d40/classutils_1_1FilterBloom.html" title="Space-efficient probabilistic data structure.">utils::FilterBloom</a> was merged in along with initial SLRU cache implementations. The work is a part of the <a href="https://academy.yandex.ru/schools/backend">backend development school</a> course project by <a href="https://github.com/LeonidFaktorovich">Leonid Faktorovich</a>, <a href="https://github.com/stewkk">Alexandr Starovoytov</a>, <a href="https://github.com/raslboyy">Ruslan</a>, Egor Chistyakov from <a href="https://github.com/userver-framework/userver/pull/262">PR #262</a>.</li>
<li>HTTP request decompression is now ON by default in <a class="el" href="../../d1/ddc/classserver_1_1handlers_1_1HandlerBase.html" title="Base class for the request handlers.">server::handlers::HandlerBase</a>.</li>
<li><a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html" title="A client for easy dynamic config fetching in components.">dynamic_config::Source</a> now allows subscribing to a particular dynamic config variable changes.</li>
<li>Initial support for <a class="el" href="../../d2/d1b/structutils_1_1statistics_1_1Rate.html">utils::statistics::Rate</a> metrics type.</li>
<li>Human-readable "pretty" format (<a class="el" href="../../d0/d09/pretty__format_8hpp.html#aaa5209f487ab1e6b1f5393e41ca5d00a" title="Output statistics in a human-readable, compact format, useful for visual inspection.">utils::statistics::ToPrettyFormat</a>) for metrics output was added to the <a class="el" href="../../dc/d10/classserver_1_1handlers_1_1ServerMonitor.html" title="Handler that returns statistics data.">server::handlers::ServerMonitor</a>.</li>
<li>Optimizations:<ul>
<li>Don't issue tail <code>writev</code> for empty <code>io_vec</code> on bulk socket writes.</li>
<li>All the userver metrics are now written via the fast <a class="el" href="../../d7/dd9/classutils_1_1statistics_1_1Writer.html" title="Class for writing metrics.">utils::statistics::Writer</a>.</li>
<li>x2-x50 faster serialization of unique maps into <a class="el" href="../../d2/daa/classformats_1_1json_1_1ValueBuilder.html" title="Builder for JSON.">formats::json::ValueBuilder</a>.</li>
<li><a class="el" href="../../db/df9/classutils_1_1StrIcaseHash.html" title="Case insensitive ASCII hashing functor.">utils::StrIcaseHash</a> became slightly faster.</li>
<li><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task that has a unique ownership of the payload.">engine::Task</a> now does not have a virtual destructor. New <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html" title="Base class for all the asynchronous tasks (engine::Task, engine::SharedTask, engine::SharedTaskWithRe...">engine::TaskBase</a> based hierarchy does not use RTTI, resulting in smaller binaries.</li>
<li>Mongo driver does not capture stack traces in release builds in case of errors. The error path become slightly faster, server is more responsive in case of Mongo problems.</li>
</ul>
</li>
<li>Build:<ul>
<li>Improved support for Conan 2.0, many thanks to <a href="https://github.com/Jihadist">Anton</a> for the PR.</li>
<li><code>.gitattributes</code> now handles line endings automatically for files detected as text. This simplifies WSL builds. Thanks to <a href="https://github.com/anatoly-spb">Anatoly Shirokov</a> for the PR.</li>
<li>PostgreSQL libs selection is now possible in CMake if the platform has multiple versions installed, see <a class="el" href="../../d3/da9/md_en_2userver_2tutorial_2build.html#POSTGRES_LIBS">PostgreSQL versions</a> for more info.</li>
<li>Improved support for Arch Linux, many thanks to <a href="https://github.com/botanegg">Konstantin Goncharik</a> for the PR.</li>
</ul>
</li>
<li>Multiple improvements for docs, including mockserver clarifications from <a href="https://github.com/vitek">Victor Makarov</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md383"></a>
Beta (March 2023)</h2>
<ul>
<li>Now logging of particular lines could be controlled by dynamic config. See <a class="el" href="../../de/d10/md_en_2schemas_2dynamic__configs.html#USERVER_LOG_DYNAMIC_DEBUG">USERVER_LOG_DYNAMIC_DEBUG</a> for more info.</li>
<li>HTTP headers that contain the tracing context now could be customized, both for handlers and HttpClient, by feeding <a class="el" href="../../db/d3d/classtracing_1_1TracingManagerBase.html" title="Base class for propagating trace context information in headers.">tracing::TracingManagerBase</a> implementation into <a class="el" href="../../da/d25/classtracing_1_1DefaultTracingManagerLocator.html" title="Locator component that provides access to the actual TracingManager that will be used in handlers and...">tracing::DefaultTracingManagerLocator</a> (docs to come soon).</li>
<li>User defined literals for different formats are now available at <a class="el" href="../../d0/d5a/namespaceformats_1_1literals.html">formats::literals</a></li>
<li>Added <a class="el" href="../../d8/d20/classcrypto_1_1CmsSigner.html">crypto::CmsSigner</a> and <a class="el" href="../../d6/def/classcrypto_1_1CmsVerifier.html">crypto::CmsVerifier</a> as per RFC 5652.</li>
<li><a class="el" href="../../d1/d2c/classcache_1_1LruMap.html">cache::LruMap</a> and <a class="el" href="../../d5/d9c/classcache_1_1LruSet.html">cache::LruSet</a> now work with non-movable types.</li>
<li>BSON&lt;&gt;JSON conversions now supported via json_value.ConvertTo&lt;formats::bson::Value&gt;() and bson_value.ConvertTo&lt;formats::json::Value&gt;().</li>
<li><a class="el" href="../../de/def/classengine_1_1CancellableSemaphore.html" title="Class that allows up to max_simultaneous_locks concurrent accesses to the critical section....">engine::CancellableSemaphore</a> was implemented.</li>
<li>Optimizations:<ul>
<li>Mongo driver switched to a faster <a class="el" href="../../d7/dd9/classutils_1_1statistics_1_1Writer.html" title="Class for writing metrics.">utils::statistics::Writer</a>.</li>
<li><a class="el" href="../../dc/db7/group__userver__concurrency.html#gac91f56844690ea79c568cb3b43ba98a5">utils::Async</a> functions now make 1 dynamic allocation less, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>Getting the default logger now takes only a single atomic read. LOG_* macro now do two RMW atomic operations less and do not use RCU, that could lead to a dynamic memory allocation in rare cases.</li>
<li>PostgreSQL driver now does much less atomic operations due to wider usage of std::move on the internal std::shared_ptr.</li>
<li>Added <a class="el" href="../../d1/dc2/classstorages_1_1postgres_1_1Transaction.html#a94b9d74fd873283bde18c6567fa8d1c7">storages::postgres::Transaction::ExecuteDecomposeBulk</a> function for fast insertion of C++ array of structures as arrays of values.</li>
<li>Str[I]caseHash now uses a 5-10 times faster SipHash13</li>
<li>Redis driver now does an asynchronous DNS resolving, amount of heavy system calls dropped down noticeably.</li>
</ul>
</li>
<li>Build changes:<ul>
<li>CMake option <code>USERVER_OPEN_SOURCE_BUILD</code> was removed as the build is always the same for in-house and public environments.</li>
<li>CMake option <code>USERVER_FEATURE_SPDLOG_TCP_SINK</code> was removed as now the implementation of the sink does not rely on spdlog implementation.</li>
<li>Configuration step was made much faster.</li>
<li>Makefile was simplified and only up-to-date targets were left.</li>
<li>Added a script to prepare docker build, see <a class="el" href="../../d8/df2/md_en_2userver_2docker.html">Docker for userver</a> for more info.</li>
<li>Scripts for generating CMakeLists were simplified and cleared from internal stuff.</li>
<li>Added missing dependencies to scripts/docs/en/deps_ubuntu_.md20_04 and sorted all the dependencies, thanks to <a href="https://github.com/anatoly-spb">Anatoly Shirokov</a> for the PR.</li>
</ul>
</li>
<li>Statistics and metrics now do additional lifetime checks in debug builds to catch improper usages.</li>
<li>Push functions of <a class="el" href="../../d0/d92/classconcurrent_1_1MpscQueue.html">concurrent::MpscQueue</a> and other queues now have a <code>[[nodiscard]]</code> for compile time misuse detection.</li>
<li>Significant improvement of Redis server-side errors diagnostic.</li>
<li>Improved diagnostics for distributed locking.</li>
<li>Fixed numerous typos in docs and samples.</li>
</ul>
<h2><a class="anchor" id="autotoc_md384"></a>
Beta (February 2023)</h2>
<ul>
<li><a class="el" href="../../d7/d1a/classtracing_1_1Span.html" title="Measures the execution time of the current code block, links it with the parent tracing::Spans and st...">tracing::Span</a> now logs the location where it was constructed.</li>
<li>Now the string&lt;&gt;enum <a class="el" href="../../d9/dbf/classutils_1_1TrivialBiMap.html" title="Bidirectional unordered map for trivial types, including string literals; could be efficiently used a...">utils::TrivialBiMap</a> mappings could be used within <a class="el" href="../../d3/d28/structstorages_1_1postgres_1_1io_1_1CppToUserPg.html" title="Primary template for declaring mapping to a PostgreSQL user type.">storages::postgres::io::CppToUserPg</a>. See <a class="el" href="../../de/da8/pg_enum.html">uPg: Mapping a C++ enum to PostgreSQL enum type.</a> for more info.</li>
<li><a class="el" href="../../d4/da4/classcomponents_1_1Logging.html" title="Logging component">components::Logging</a> now provides options for configuring the task processors to do the asynchronous logging.</li>
<li>Redis driver now supports the <code>geosearch</code> and <code>unlink</code> commands.</li>
<li>DNS resolvers were switched to asynchronous mode by default.</li>
<li>UDP chaos proxy was implemented, see <a class="el" href="../../d8/de5/classpytest__userver_1_1chaos_1_1UdpGate.html">chaos.UdpGate</a></li>
<li>C++ Standard now could be explicitly controlled via the CMake flag <code>CMAKE_CXX_STANDARD</code>.</li>
<li>Optimizations:<ul>
<li>Many metrics were moved to a faster <a class="el" href="../../d7/dd9/classutils_1_1statistics_1_1Writer.html" title="Class for writing metrics.">utils::statistics::Writer</a>.</li>
<li>gRPC now allows concurrent execution of 1 Read and 1 Write on the same Bidirectional stream.</li>
</ul>
</li>
<li>Python dependencies for build are now automatically installed, thanks to <a href="https://github.com/shuva10v">Pavel Shuvalov</a> for the PR!</li>
<li>Added a Conan option to disable LTO, thanks to <a href="https://github.com/aarchetype">Oleg Burchakov</a> for the PR!</li>
<li>Diagnostic messages and docs were improved, including:<ul>
<li>In case of a typo in static config name the fixed name is now reported</li>
<li><code>error-injection</code> static option for <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a> was documented</li>
<li>Fixed typos, thanks to <a href="https://github.com/Ch0p1k3">Ch0p1k3</a> for the PR!</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md385"></a>
Beta (January 2023)</h2>
<ul>
<li>Unknown/mistyped values in static configs are now reported by default. <a class="el" href="../../dc/dcc/md_en_2userver_2component__system.html#static-configs-validation">Static configs validation</a> now could use <code>minimum</code> and <code>maximum</code>.</li>
<li>gRPC clients now have ReadAsync() functions, that return a future and allow to request multiple results from different RPCs at the same moment.</li>
<li><a class="el" href="../../d9/d55/classugrpc_1_1server_1_1Server.html" title="Manages the gRPC server.">ugrpc::server::Server</a> now can return a vector of gRPC service names.</li>
<li>To aid in asynchronous drivers development the <a class="el" href="../../d9/d75/classengine_1_1io_1_1FdPoller.html" title="Low-level poller that can wait for read, write, and read/write operations on a file descriptor....">engine::io::FdPoller</a> is now a part of the public API.</li>
<li>Added a blazing fast <a class="el" href="../../d9/dbf/classutils_1_1TrivialBiMap.html" title="Bidirectional unordered map for trivial types, including string literals; could be efficiently used a...">utils::TrivialBiMap</a>.</li>
<li>HTTP Streaming is now considered production ready, see <a class="el" href="../../df/d94/md_en_2userver_2http__server.html">HTTP, HTTPS, WebSocket</a> for docs.</li>
<li>Testsuite fixtures were improved:<ul>
<li>Fixtures for detecting service readiness now work out of the box for services without <a class="el" href="../../d7/d6d/classserver_1_1handlers_1_1Ping.html" title="Handler that returns HTTP 200 if the service is OK and able to process requests.">server::handlers::Ping</a></li>
<li>Known databases do no not require manual dependency registration any more</li>
<li>Improved usage experience and testing of Metrics, see <a class="el" href="../../df/d07/md_en_2userver_2functional__testing.html#TESTSUITE_METRICS_TESTING">Testsuite metrics testing</a>.</li>
<li>Added fixtures to work with cache dumps.</li>
<li><a class="el" href="../../dc/db7/group__userver__testsuite__fixtures.html#ga48081e70f90a1492e771e783fa5f2ce9">service_secdist_path</a> and <code>--service-secdist</code> options simplify setup of the <a class="el" href="../../da/dc7/classcomponents_1_1Secdist.html" title="Component that stores security related data (keys, passwords, ...).">components::Secdist</a> in tests.</li>
<li>Many fixtures were documented at <a class="el" href="../../dc/db7/group__userver__testsuite__fixtures.html">Fixtures</a>, pytest plugins were documented in tutorials and at <a class="el" href="../../df/d07/md_en_2userver_2functional__testing.html">Functional service tests (testsuite)</a>.</li>
</ul>
</li>
<li>Optimizations:<ul>
<li>Now the engine does less random number generator invocations for HTTP handling.</li>
<li>Logging of <a class="el" href="../../d7/d1a/classtracing_1_1Span.html" title="Measures the execution time of the current code block, links it with the parent tracing::Spans and st...">tracing::Span</a> became x2 faster</li>
<li>IntrusiveMpscQueue is now used for engine internals, IO operations now schedule faster.</li>
<li>Writing HTTP headers became faster, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li><a class="el" href="../../d9/dbf/classutils_1_1TrivialBiMap.html" title="Bidirectional unordered map for trivial types, including string literals; could be efficiently used a...">utils::TrivialBiMap</a> is now used wherever it is possible.</li>
</ul>
</li>
<li>Metrics:<ul>
<li>New interface for writing metrics <a class="el" href="../../d7/dd9/classutils_1_1statistics_1_1Writer.html" title="Class for writing metrics.">utils::statistics::Writer</a> is now considered stable.</li>
<li>More metrics were moved to a faster <a class="el" href="../../d7/dd9/classutils_1_1statistics_1_1Writer.html" title="Class for writing metrics.">utils::statistics::Writer</a>, including <a class="el" href="../../d7/d33/classutils_1_1statistics_1_1MetricTag.html" title="Metric description.">utils::statistics::MetricTag</a>.</li>
<li>More metrics for Redis, including replica-syncing metrics.</li>
<li>More tests for metrics.</li>
</ul>
</li>
<li>FreeBSD build fixes.</li>
<li>Multiple documentation and diagnostics improvements.</li>
<li>Added <code>ToStringView(HttpMethod)</code> function, thanks to <a href="https://github.com/hitsedesen">Фёдор Барков</a> for the PR.</li>
<li>Added more <a class="el" href="../../dc/d3f/namespaceengine.html#a142b0ca27e383ae38f52cac01692a8d0" title="Suspends execution for a brief period of time, possibly allowing other tasks to execute.">engine::Yield</a> tests, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
</ul>
<h2><a class="anchor" id="autotoc_md386"></a>
Beta (December 2022)</h2>
<ul>
<li>Added logs colorization to the testsuite plugins, thanks to <a href="https://github.com/vitek">Victor Makarov</a> for the PR.</li>
<li>Multiple big improvements in framework testing:<ul>
<li>improved unit tests re-entrance</li>
<li>multiple new chaos and metrics tests</li>
<li>improved testsuite diagnostics</li>
</ul>
</li>
<li>Added a <a class="el" href="../../da/d24/md_en_2userver_2tutorial_2auth__postgres.html">Custom Authorization/Authentication via PostgreSQL</a> sample.</li>
<li>Added an option <code>set_tracing_headers</code> to disable HTTP tracing headers, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>Fixed race in RabbitMQ sample, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>Fixed PostgreSQL testing at GithubCI, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
</ul>
<h2><a class="anchor" id="autotoc_md387"></a>
Beta (November 2022)</h2>
<ul>
<li><a class="el" href="../../d8/dd4/classengine_1_1SingleWaitingTaskMutex.html" title="Lighter version of Mutex with not more than 1 waiting task.">engine::SingleWaitingTaskMutex</a> was added, many thanks to the <a href="https://github.com/den818">Denis Korovyakovskiy</a> for the PR!</li>
<li>On-disk dumps were implemented for the LRU caches, many thanks to the <a href="https://github.com/YaImedgar">Roman Guryanov</a> and <a href="https://github.com/wyr241">wyr241</a> for the PR!</li>
<li>Introduce metrics for ev-threads cpu load, thanks to the <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>AMQP optimized, thanks to the <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>Improved support for Conan packaging, many thanks to <a href="https://github.com/Jihadist">Anton</a> for the PR.</li>
<li>Fixed GCC build, thanks to the <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>Fixed <a class="el" href="../../d7/d72/namespaceformats_1_1yaml.html" title="YAML support.">formats::yaml</a> exception message typo, thanks to the <a href="https://github.com/dengaleev">Denis Galeev</a> for the PR.</li>
<li>Added gRPC testsuite mock sample at <a class="el" href="../../d6/daa/md_en_2userver_2tutorial_2grpc__service.html">gRPC client and service</a>.</li>
<li>Added <a class="el" href="../../d0/db5/classengine_1_1TaskCancellationToken.html" title="Cancellation token to given task object.">engine::TaskCancellationToken</a> to simplify async drivers development.</li>
<li>Simplified build steps, in particular:<ul>
<li>Added <code>USERVER_PYTHON_PATH</code> to specify the path to the python3 binary for use in testsuite tests.</li>
<li>Conan patches were merged into CMake scripts.</li>
<li>Channelz support is now detected automatically.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md388"></a>
Beta (October 2022)</h2>
<ul>
<li>Experimental support for Conan packaging, many thanks to <a href="https://github.com/Jihadist">Anton</a> for the PR.</li>
<li>Prometheus and Graphite metrics formats were added, see <a class="el" href="../../d9/dac/md_en_2userver_2service__monitor.html">Service Statistics and Metrics (Prometheus/Graphite/...)</a> for details.</li>
<li>Initial support for chaos testing was added, see <a class="el" href="../../de/d74/md_en_2userver_2chaos__testing.html">Chaos Testing</a> for more info.</li>
<li>Generic Escape implementation for ranges was added to Clickhouse, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>TLS/SSL support for Redis.</li>
<li>Multiple optimizations from <a href="https://github.com/itrofimow">Ivan Trofimov</a>:<ul>
<li><a class="el" href="../../db/db2/structutils_1_1datetime_1_1WallCoarseClock.html" title="System clock with up to a few millisecond resolution that is slightly faster than the std::chrono::sy...">utils::datetime::WallCoarseClock</a> and its usage in the framework core;</li>
<li>HTTP "Date" header caching;</li>
<li>Significant reduction of syscalls count during any recv operations;</li>
<li>Server::GetRequestsView not initialized if it is not required;</li>
<li><a class="el" href="../../df/d51/hex_8hpp.html#aa446e60a15ecfeb47d6340dd7c9519d2" title="Converts input to hex and writes data to output out.">utils::encoding::ToHex</a> became faster;</li>
<li>Marking response as ready became faster.</li>
</ul>
</li>
<li>Better diagnostics for CoroPool initialization failure, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the PR.</li>
<li>New handler <a class="el" href="../../dc/dde/classserver_1_1handlers_1_1OnLogRotate.html" title="Handler that controls logging levels of all the loggers.">server::handlers::OnLogRotate</a>.</li>
<li>Multiple optimizations, including:<ul>
<li>Faster async cancellations for PostgreSQL;</li>
<li>Avoid using dynamic_cast in multiple places;</li>
<li>Avoid calling <code>std::chrono::steady_clock::now()</code> in multiple places.</li>
</ul>
</li>
<li>gRPC mockserver support (see <a class="el" href="../../d6/daa/md_en_2userver_2tutorial_2grpc__service.html">gRPC client and service</a>).</li>
<li>gRPC now provides an efficient API for async execution of requests without additional <code><a class="el" href="../../dc/db7/group__userver__concurrency.html#gac91f56844690ea79c568cb3b43ba98a5">utils::Async</a></code> invocations.</li>
<li>Build fixes for older platforms, thanks to <a href="https://github.com/ybogo">Yuri Bogomolov</a> for the PR.</li>
<li><a class="el" href="../../d4/da4/classcomponents_1_1Logging.html" title="Logging component">components::Logging</a> now can output logs to UNIX sockets.</li>
<li>Now the "help wanted" issues at github have additional tags "good first issue" and "big", to help you to choose between a good starting issue and a big feature. See <a class="el" href="../../d0/d7b/md_en_2userver_2development_2releases.html">Releases, Trunk-based Development and Pull Requests</a> for more info.</li>
</ul>
<h2><a class="anchor" id="autotoc_md389"></a>
Beta (September 2022)</h2>
<ul>
<li><a href="https://github.com/itrofimow">Ivan Trofimov</a> implemented the RabbitMQ driver.</li>
<li>Added navigation to the next and previous page in docs, thanks to multiple feature requests in <a href="https://t.me/userver_ru">Telegram support chat</a>.</li>
<li>Improved Task::Detach docs and added recommendation to use <a class="el" href="../../d0/dc7/classconcurrent_1_1BackgroundTaskStorage.html">concurrent::BackgroundTaskStorage</a> instead, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the bugreport.</li>
<li>Added <code>start-</code> targets for the samples, to simplify experimenting with them.</li>
<li>Docs now support dark theme out of the box.</li>
<li>Fixed CMake issue with <code>-DUSERVER_FEATURE_TESTSUITE=0</code>, thanks to <a href="https://github.com/JorgenPo">Георгий Попов</a> for the bugreport.</li>
<li>Fixed build on Arch Linux, thanks to <a href="https://github.com/posidoni">Mikhail K.</a> for the bugreport.</li>
<li>Fixed building in virtual environment on Windows, thanks to <a href="https://github.com/sabudilovskiy">sabudilovskiy</a> for the bug report.</li>
<li>Fixed building with <code>-std=gnu++20</code>, thanks to <a href="https://github.com/JorgenPo">Георгий Попов</a> for the PR.</li>
<li>Improved package version detection in CMake via <code>pkg-config</code>.</li>
<li>Added a <code>USERVER_FEATURE_UTEST</code> flag for disabling utest and ubench target builds, thanks to <a href="https://github.com/Jihadist">Anton</a> for the PR.</li>
<li>Simplified gRPC component registration and usage.</li>
<li>Added an ability to turn on gRPCs ChannelZ.</li>
<li>Added evalsha/script load commands for Redis driver.</li>
</ul>
<h2><a class="anchor" id="autotoc_md390"></a>
Beta (August 2022)</h2>
<ul>
<li>Added <a class="el" href="../../dd/d88/classserver_1_1handlers_1_1HttpHandlerStatic.html" title="Handler that returns HTTP 200 if file exist and returns file data with mapped content/type.">server::handlers::HttpHandlerStatic</a> handler to serve static pages.</li>
<li>Added navigation to previous and next page in docs.</li>
<li>Optimized internals:<ul>
<li>WaitListLight now never calls std::this_thread::yield().</li>
<li>More lightweight queues are now used in HTTP server.</li>
<li>Smaller critical section in TaskContext::Sleep(), improved performance for many the synchronization primitives.</li>
<li>std::unique_ptr now holds the payload in <a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task that has a unique ownership of the payload.">engine::Task</a>, rather than std::shared_ptr. Thanks to the <a href="https://github.com/szvyagin-gj">Stas Zvyagin</a> for the idea and draft PR.</li>
<li>Simplified and optimized FdControl, resulting in less CPU and memory usage for sockets, pipes and TLS.</li>
</ul>
</li>
<li>Fixed typos in tests, thanks to <a href="https://github.com/JorgenPo">Георгий Попов</a> for the PR.</li>
<li>Removed suspicious operator, thanks to the <a href="https://github.com/PatriotRossii">PatriotRossii</a> for the bugreport.</li>
<li>Fixed CentOS 7.8 builds, many thanks to <a href="https://github.com/jinguoli">jinguoli</a> for the bugreport and fix ideas.</li>
<li>Fixed Gentoo builds, many thanks to <a href="https://github.com/SanyaNya">SanyaNya</a> for the PR.</li>
<li>Fixed default DB values in <a href="https://github.com/userver-framework/uservice-dynconf">uservice-dynconf</a>, many thanks to <a href="https://github.com/skene2321">skene2321</a> for the bugreport.</li>
<li>Added <a class="el" href="../../d7/d42/classengine_1_1io_1_1WritableBase.html">engine::io::WritableBase</a> and <a class="el" href="../../d3/d1e/classengine_1_1io_1_1RwBase.html">engine::io::RwBase</a>, thanks to <a href="https://github.com/szvyagin-gj">Stas Zvyagin</a> for the idea.</li>
<li>Added <a class="el" href="../../d1/dbc/classcomponents_1_1TcpAcceptorBase.html" title="Component for accepting incoming TCP connections.">components::TcpAcceptorBase</a> with new tutorials <a class="el" href="../../dc/d93/md_en_2userver_2tutorial_2tcp__service.html">TCP half-duplex server with static configs validation</a> and <a class="el" href="../../db/db9/md_en_2userver_2tutorial_2tcp__full.html">TCP full-duplex server with metrics and Spans</a>, thanks to <a href="https://github.com/szvyagin-gj">Stas Zvyagin</a> for the idea and usage samples at <a href="https://github.com/szvyagin-gj/unetwork">https://github.com/szvyagin-gj/unetwork</a>.</li>
<li>Fixed comparison operator for UserScope, thanks to <a href="https://github.com/PatriotRossii">PatriotRossii</a> for the PR.</li>
<li>Add CryptoPP version download during CryptoPP installation, thanks to <a href="https://github.com/Nybik">Konstantin</a> for the PR.</li>
<li>Added more documentation on Non FIFO queues, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the report.</li>
<li>Added missing std::atomic into TaskProcessor, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the report.</li>
<li>Fixed Boost version detection on MacOs, thanks to <a href="https://github.com/Nybik">Konstantin</a> for the PR.</li>
<li>Added Fedora 36 support, thanks to <a href="https://github.com/bjconlan">Benjamin Conlan</a> for the PR.</li>
<li>Improved statistics for gRPC.</li>
<li>Vector versions of <a class="el" href="../../dd/dcf/classengine_1_1io_1_1Socket.html#a0bd51bad966cc32e4827844d255d4e0e" title="Sends a buffer vector to the socket.">engine::io::Socket::SendAll</a> were added and used to optimize CPU and memory consumption during HTTP response sends.</li>
</ul>
<h2><a class="anchor" id="autotoc_md391"></a>
Pre announce (May-Jul 2022)</h2>
<ul>
<li>Fixed <a class="el" href="../../df/d00/classengine_1_1io_1_1TlsWrapper.html">engine::io::TlsWrapper</a> retries, thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the report.</li>
<li>Fixed missing <code>const</code> in <a class="el" href="../../d6/d84/namespaceutils.html#a5047c1275f53e699e26869c045ad3697">utils::DaemonMain</a> function, thanks to <a href="https://github.com/deiuch">Denis Chernikov</a> for the PR.</li>
<li>Cmake function <code>userver_testsuite_add</code> now can pass arguments to <code>virtualenv</code>, thanks to <a href="https://github.com/izvolov">Дмитрий Изволов</a> for the PR.</li>
<li>Improved hello_service run instruction, thanks to <a href="https://github.com/Svirex">Svirex</a> for the PR.</li>
<li>Better Python3 detection, thanks to <a href="https://github.com/izvolov">Дмитрий Изволов</a> for the PR.</li>
<li>Task processors now have an <code>os-scheduling</code> static config option and @md_en_userver_task_processors_guide "a usage guide".</li>
<li>Added a <a href="https://github.com/userver-framework/pg_service_template">pg_service_template</a> service template that uses userver the userver framework with PostgreSQL</li>
<li>In template services, it is now possible to deploy the environment and run the service in one command: <code>make service-start-debug</code> or <code>make service-start-release</code>.</li>
<li>Added userver::os_signals::Component, which is used for handling OS signals.</li>
<li>You can now allow skipping the component in the static config file by specializing the <a class="el" href="../../d0/d1f/namespacecomponents.html#a647349627b7de0a22e024ffe4d628309">components::kConfigFileMode</a>, see <a class="el" href="../../dc/dcc/md_en_2userver_2component__system.html">the documentation</a>.</li>
<li>The PostgreSQL driver now requires explicit serialization methods when working with enum.</li>
<li>Optimized CPU consumption for handlers that do not log requests or responses.</li>
<li><a class="el" href="../../dc/db7/group__userver__concurrency.html#gac91f56844690ea79c568cb3b43ba98a5">utils::Async()</a> now can be invoked from non-coroutine thread (in that case do not forget to use <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a8d61c2d7a7abbf3b5eea91ab9be9ad77">engine::Task::BlockingWait()</a> to wait for it). <a class="el" href="../../d7/d1a/classtracing_1_1Span.html" title="Measures the execution time of the current code block, links it with the parent tracing::Spans and st...">tracing::Span</a> construction became faster. Thanks to <a href="https://github.com/itrofimow">Ivan Trofimov</a> for the report.</li>
<li>Improved MacOS support, thanks to <a href="https://github.com/kargatpwnz">Evgeny Medvedev</a>.</li>
<li>Docker support: <a href="https://github.com/userver-framework/docker-userver-build-base/pkgs/container/docker-userver-build-base">base image for development</a>, docker-compose.yaml for the userver with build and test targets. See <a class="el" href="../../d3/da9/md_en_2userver_2tutorial_2build.html">Configure and Build</a></li>
<li>Docs improved: removed internal links; added <a class="el" href="../../da/d26/md_en_2userver_2framework__comparison.html">Feature Comparison with other Frameworks</a>, <a class="el" href="../../d0/dd5/md_en_2userver_2supported__platforms.html">Supported Platforms</a>, <a class="el" href="../../db/dde/md_en_2userver_2security__changelog.html">Security Changelog</a>, <a class="el" href="../../db/d8f/md_en_2userver_2profile__context__switches.html">Profiling context switches</a>, <a class="el" href="../../de/ddb/md_en_2userver_2driver__guide.html">Driver Writing Guide</a>, @md_en_userver_task_processors_guide, <a class="el" href="../../df/d4e/md_en_2userver_2os__signals.html">Handling OS signals</a> and <a class="el" href="../../da/d9a/md_en_2userver_2roadmap__and__changelog.html">Roadmap and Changelog</a>.</li>
<li>AArch64 build supported. Tests pass successfully</li>
<li>HTTP headers hashing not vulnerable to HashDOS any more, thanks to Ivan Trofimov for the report.</li>
<li><a class="el" href="../../dc/db7/group__userver__concurrency.html#ga6fc06edbfecd5d58598fb3880ae9edb2" title="Waits for the completion of any of the specified tasks or the cancellation of the caller.">engine::WaitAny</a> now can wait for <a class="el" href="../../d8/d67/classengine_1_1Future.html" title="std::future replacement for asynchronous tasks that works in pair with engine::Promise">engine::Future</a>, including futures that are signaled by <a class="el" href="../../d9/d2e/classengine_1_1Promise.html" title="std::promise replacement for asynchronous tasks that works in pair with engine::Future">engine::Promise</a> from non-coroutine environment.</li>
<li>Optimized the PostgreSql driver, thanks to Dmitry Sokolov for the idea.</li>
<li>Arch Linux is now properly supported, thanks to <a href="https://github.com/lesf0">Denis Sheremet</a> and <a href="https://github.com/botanegg">Konstantin Goncharik</a>.</li>
<li>Published a service to manage <a href="https://github.com/userver-framework/uservice-dynconf">dynamic configs</a> of other userver-based services.</li>
<li>Now it is possible to enable logging a particular LOG_XXX by its source location, see <a class="el" href="../../dd/dea/classserver_1_1handlers_1_1DynamicDebugLog.html" title="Handler for forcing specific lines logging. Feature also known as dynamic debug logging.">server::handlers::DynamicDebugLog</a> for more details.</li>
<li>Added a wrapper class <a class="el" href="../../da/dbf/classutils_1_1NotNull.html" title="Restricts a pointer or smart pointer to only hold non-null values.">utils::NotNull</a> and aliases <a class="el" href="../../df/d2e/group__userver__containers.html#gafc699c31be2699c5ac2d77ddd0cea8ef" title="A std::unique_ptr that is guaranteed to be not-null.">utils::UniqueRef</a> and <a class="el" href="../../df/d2e/group__userver__containers.html#ga041d779f6f4c95c4674e3694db0f1d48" title="A std::shared_ptr that is guaranteed to be not-null.">utils::SharedRef</a>.</li>
<li>LTSV-format is now available for logs via <a class="el" href="../../d4/da4/classcomponents_1_1Logging.html" title="Logging component">components::Logging</a> static option</li>
</ul>
<hr  />
<p> <div class="bottom-nav">  ⇦ <a class="el" href="../../d0/d7b/md_en_2userver_2development_2releases.html">Releases, Trunk-based Development and Pull Requests</a> | <a class="el" href="../../de/d61/md_en_2userver_2faq.html">Frequently Asked Questions</a> ⇨  </div>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Oct 4 2023 12:20:25 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.9.8</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/> 
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_header();
      addLinks();
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons(); // TODO: code style?
    }, 0);
    });
  });
</script>
</body>
</html>
