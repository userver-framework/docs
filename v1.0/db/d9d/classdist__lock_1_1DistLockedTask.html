<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.9.8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: dist_lock::DistLockedTask Class Reference</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript" src="../../toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.init()
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/d9d/classdist__lock_1_1DistLockedTask.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d5/d33/classdist__lock_1_1DistLockedTask-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">dist_lock::DistLockedTask Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="../../dc/db7/group__userver__concurrency.html">Concurrency</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>A task that tries to acquire a distributed lock and runs user callback once while the lock is held.  
 <a href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">userver/dist_lock/dist_locked_task.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for dist_lock::DistLockedTask:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d4d/classdist__lock_1_1DistLockedTask__inherit__graph.svg" width="199" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for dist_lock::DistLockedTask:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d66/classdist__lock_1_1DistLockedTask__coll__graph.svg" width="199" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:acebbf79897985008b6086473fe7a6795" id="r_acebbf79897985008b6086473fe7a6795"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#acebbf79897985008b6086473fe7a6795">WorkerFunc</a> = std::function&lt; void()&gt;</td></tr>
<tr class="separator:acebbf79897985008b6086473fe7a6795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classengine_1_1TaskBase"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classengine_1_1TaskBase')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html">engine::TaskBase</a></td></tr>
<tr class="memitem:ac4769fc23b14426907e47e79b8c99eeb inherit pub_types_classengine_1_1TaskBase" id="r_ac4769fc23b14426907e47e79b8c99eeb"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#ac4769fc23b14426907e47e79b8c99eeb">Importance</a> { <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#ac4769fc23b14426907e47e79b8c99eeba07fa7a19aa722c635a15e94cb7f50416">kNormal</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#ac4769fc23b14426907e47e79b8c99eeba5a20548c220f372fc701cae6de94040b">kCritical</a>
<br />
 }</td></tr>
<tr class="memdesc:ac4769fc23b14426907e47e79b8c99eeb"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task that has a unique ownership of the payload.">Task</a> importance.  <a href="../../d5/d4b/classengine_1_1TaskBase.html#ac4769fc23b14426907e47e79b8c99eeb">More...</a><br /></td></tr>
<tr class="separator:ac4769fc23b14426907e47e79b8c99eeb inherit pub_types_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3263b3671eeab3f01a2e15e5dfcfd6cf inherit pub_types_classengine_1_1TaskBase" id="r_a3263b3671eeab3f01a2e15e5dfcfd6cf"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cf">State</a> { <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfab10913c938482a8aa4ba85b7a1116cb4">kInvalid</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfaaf1adf7ec3673b4f5765cfbc5d43b7dc">kNew</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfa023506f9e1203a14ea275f5e6acb2e1a">kQueued</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfa2fc7fbf0d19294f85dd3880460dd3c0a">kRunning</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfa6e09d95243f1f7bec7d0061e5831dc82">kSuspended</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfa971493a769ad0aed23946733ede4a8f1">kCancelled</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfa8751b92dc818d6876bde3504ab1efd4d">kCompleted</a>
<br />
 }</td></tr>
<tr class="memdesc:a3263b3671eeab3f01a2e15e5dfcfd6cf"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task that has a unique ownership of the payload.">Task</a> state.  <a href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cf">More...</a><br /></td></tr>
<tr class="separator:a3263b3671eeab3f01a2e15e5dfcfd6cf inherit pub_types_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40c65fb48fb93966ea35eedfaf568e0 inherit pub_types_classengine_1_1TaskBase" id="r_af40c65fb48fb93966ea35eedfaf568e0"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#af40c65fb48fb93966ea35eedfaf568e0">WaitMode</a> { <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#af40c65fb48fb93966ea35eedfaf568e0aa8581d033946099f6f8ccd5c912f5d5f">kSingleWaiter</a>
, <br />
&#160;&#160;<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#af40c65fb48fb93966ea35eedfaf568e0a181c4d77a868f22aa25836a27fb355c4">kMultipleWaiters</a>
<br />
 }</td></tr>
<tr class="memdesc:af40c65fb48fb93966ea35eedfaf568e0"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d8/d7c/classengine_1_1Task.html" title="Asynchronous task that has a unique ownership of the payload.">Task</a> wait mode.  <a href="../../d5/d4b/classengine_1_1TaskBase.html#af40c65fb48fb93966ea35eedfaf568e0">More...</a><br /></td></tr>
<tr class="separator:af40c65fb48fb93966ea35eedfaf568e0 inherit pub_types_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1f9b35564f90b9c20d7dd885196d6170" id="r_a1f9b35564f90b9c20d7dd885196d6170"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#a1f9b35564f90b9c20d7dd885196d6170">DistLockedTask</a> ()=default</td></tr>
<tr class="separator:a1f9b35564f90b9c20d7dd885196d6170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71fc3606bbdef7e2ad833b576fdf3218" id="r_a71fc3606bbdef7e2ad833b576fdf3218"><td class="memItemLeft" align="right" valign="top"><a id="a71fc3606bbdef7e2ad833b576fdf3218" name="a71fc3606bbdef7e2ad833b576fdf3218"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DistLockedTask</b> (<a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a71fc3606bbdef7e2ad833b576fdf3218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac88cb2210c2634f2b748880aa13e42c6" id="r_ac88cb2210c2634f2b748880aa13e42c6"><td class="memItemLeft" align="right" valign="top"><a id="ac88cb2210c2634f2b748880aa13e42c6" name="ac88cb2210c2634f2b748880aa13e42c6"></a>
<a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:ac88cb2210c2634f2b748880aa13e42c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32493c02a88adb8c2b8651b02d8aae25" id="r_a32493c02a88adb8c2b8651b02d8aae25"><td class="memItemLeft" align="right" valign="top"><a id="a32493c02a88adb8c2b8651b02d8aae25" name="a32493c02a88adb8c2b8651b02d8aae25"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DistLockedTask</b> (const <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> &amp;)=delete</td></tr>
<tr class="separator:a32493c02a88adb8c2b8651b02d8aae25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ee123527c83dec12c278ad3a7356945" id="r_a1ee123527c83dec12c278ad3a7356945"><td class="memItemLeft" align="right" valign="top"><a id="a1ee123527c83dec12c278ad3a7356945" name="a1ee123527c83dec12c278ad3a7356945"></a>
<a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a1ee123527c83dec12c278ad3a7356945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36b6fc598efd16fc164878afcab92f1" id="r_af36b6fc598efd16fc164878afcab92f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#af36b6fc598efd16fc164878afcab92f1">DistLockedTask</a> (std::string name, WorkerFunc worker_func, std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt; strategy, const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;settings={}, <a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1">DistLockWaitingMode</a> mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8">DistLockWaitingMode::kWait</a>, <a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460">DistLockRetryMode</a> retry_mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460a7d38367a395df05d79abf44f3bd9f7cb">DistLockRetryMode::kRetry</a>)</td></tr>
<tr class="separator:af36b6fc598efd16fc164878afcab92f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c736c138f5a3fbcea9f141473e7506" id="r_a89c736c138f5a3fbcea9f141473e7506"><td class="memItemLeft" align="right" valign="top"><a id="a89c736c138f5a3fbcea9f141473e7506" name="a89c736c138f5a3fbcea9f141473e7506"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DistLockedTask</b> (engine::TaskProcessor &amp;task_processor, std::string name, WorkerFunc worker_func, std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt; strategy, const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;settings={}, <a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1">DistLockWaitingMode</a> mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8">DistLockWaitingMode::kWait</a>, <a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460">DistLockRetryMode</a> retry_mode=<a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460a7d38367a395df05d79abf44f3bd9f7cb">DistLockRetryMode::kRetry</a>)</td></tr>
<tr class="memdesc:a89c736c138f5a3fbcea9f141473e7506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html" title="A task that tries to acquire a distributed lock and runs user callback once while the lock is held.">DistLockedTask</a> to be run in a specific engine::TaskProcessor. <br /></td></tr>
<tr class="separator:a89c736c138f5a3fbcea9f141473e7506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc079215569b5563f890e7143990b110" id="r_acc079215569b5563f890e7143990b110"><td class="memItemLeft" align="right" valign="top">std::optional&lt; std::chrono::steady_clock::duration &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#acc079215569b5563f890e7143990b110">GetLockedDuration</a> () const</td></tr>
<tr class="separator:acc079215569b5563f890e7143990b110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c837a11899341dc09a46709cecc0703" id="r_a3c837a11899341dc09a46709cecc0703"><td class="memItemLeft" align="right" valign="top"><a id="a3c837a11899341dc09a46709cecc0703" name="a3c837a11899341dc09a46709cecc0703"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Get</b> () noexcept(false)</td></tr>
<tr class="separator:a3c837a11899341dc09a46709cecc0703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classengine_1_1TaskBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classengine_1_1TaskBase')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html">engine::TaskBase</a></td></tr>
<tr class="memitem:ab31ddea3f3007c2a5b2ad5f7d9378768 inherit pub_methods_classengine_1_1TaskBase" id="r_ab31ddea3f3007c2a5b2ad5f7d9378768"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#ab31ddea3f3007c2a5b2ad5f7d9378768">IsValid</a> () const</td></tr>
<tr class="memdesc:ab31ddea3f3007c2a5b2ad5f7d9378768 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this object owns an actual task (not <code><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cfab10913c938482a8aa4ba85b7a1116cb4" title="Unusable.">State::kInvalid</a></code>)  <br /></td></tr>
<tr class="separator:ab31ddea3f3007c2a5b2ad5f7d9378768 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb71baede3971e9661b52e64fe17479b inherit pub_methods_classengine_1_1TaskBase" id="r_adb71baede3971e9661b52e64fe17479b"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cf">State</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GetState</b> () const</td></tr>
<tr class="memdesc:adb71baede3971e9661b52e64fe17479b inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the task State. <br /></td></tr>
<tr class="separator:adb71baede3971e9661b52e64fe17479b inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d62e1f239004100d82d4c7134c3f50 inherit pub_methods_classengine_1_1TaskBase" id="r_af8d62e1f239004100d82d4c7134c3f50"><td class="memItemLeft" align="right" valign="top">
bool&#160;</td><td class="memItemRight" valign="bottom"><b>IsFinished</b> () const</td></tr>
<tr class="memdesc:af8d62e1f239004100d82d4c7134c3f50 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the task finished execution. <br /></td></tr>
<tr class="separator:af8d62e1f239004100d82d4c7134c3f50 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb992fb952993a82dc50d0e472521d18 inherit pub_methods_classengine_1_1TaskBase" id="r_acb992fb952993a82dc50d0e472521d18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#acb992fb952993a82dc50d0e472521d18">Wait</a> () const noexcept(false)</td></tr>
<tr class="memdesc:acb992fb952993a82dc50d0e472521d18 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or caller is cancelled. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a8d61c2d7a7abbf3b5eea91ab9be9ad77">BlockingWait()</a>.  <br /></td></tr>
<tr class="separator:acb992fb952993a82dc50d0e472521d18 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47ecde07622bf775d60036fcaf29b84 inherit pub_methods_classengine_1_1TaskBase" id="r_ad47ecde07622bf775d60036fcaf29b84"><td class="memTemplParams" colspan="2">template&lt;typename Rep , typename Period &gt; </td></tr>
<tr class="memitem:ad47ecde07622bf775d60036fcaf29b84 inherit pub_methods_classengine_1_1TaskBase"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#ad47ecde07622bf775d60036fcaf29b84">WaitFor</a> (const std::chrono::duration&lt; Rep, Period &gt; &amp;) const noexcept(false)</td></tr>
<tr class="memdesc:ad47ecde07622bf775d60036fcaf29b84 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or after the specified timeout or until caller is cancelled.  <br /></td></tr>
<tr class="separator:ad47ecde07622bf775d60036fcaf29b84 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4f75d18cf9eea05063422cf7431c34 inherit pub_methods_classengine_1_1TaskBase" id="r_a2c4f75d18cf9eea05063422cf7431c34"><td class="memTemplParams" colspan="2">template&lt;typename Clock , typename Duration &gt; </td></tr>
<tr class="memitem:a2c4f75d18cf9eea05063422cf7431c34 inherit pub_methods_classengine_1_1TaskBase"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a2c4f75d18cf9eea05063422cf7431c34">WaitUntil</a> (const std::chrono::time_point&lt; Clock, Duration &gt; &amp;) const noexcept(false)</td></tr>
<tr class="memdesc:a2c4f75d18cf9eea05063422cf7431c34 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or until the specified time point is reached or until caller is cancelled.  <br /></td></tr>
<tr class="separator:a2c4f75d18cf9eea05063422cf7431c34 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52175eb20479ea2b159c858856e92122 inherit pub_methods_classengine_1_1TaskBase" id="r_a52175eb20479ea2b159c858856e92122"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a52175eb20479ea2b159c858856e92122">WaitUntil</a> (<a class="el" href="../../de/d6a/classengine_1_1Deadline.html">Deadline</a>) const</td></tr>
<tr class="memdesc:a52175eb20479ea2b159c858856e92122 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution until the task finishes or until the specified deadline is reached or until caller is cancelled.  <br /></td></tr>
<tr class="separator:a52175eb20479ea2b159c858856e92122 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a062733b762bbd3206bec656aec663ed1 inherit pub_methods_classengine_1_1TaskBase" id="r_a062733b762bbd3206bec656aec663ed1"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>RequestCancel</b> ()</td></tr>
<tr class="memdesc:a062733b762bbd3206bec656aec663ed1 inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queues task cancellation request. <br /></td></tr>
<tr class="separator:a062733b762bbd3206bec656aec663ed1 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae329278cafb9d1a44488184f49e2328d inherit pub_methods_classengine_1_1TaskBase" id="r_ae329278cafb9d1a44488184f49e2328d"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>SyncCancel</b> () noexcept</td></tr>
<tr class="memdesc:ae329278cafb9d1a44488184f49e2328d inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels the task and suspends execution until it is finished. Can be called from coroutine context only. For non-coroutine context use <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a062733b762bbd3206bec656aec663ed1" title="Queues task cancellation request.">RequestCancel()</a> + <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a8d61c2d7a7abbf3b5eea91ab9be9ad77">BlockingWait()</a>. <br /></td></tr>
<tr class="separator:ae329278cafb9d1a44488184f49e2328d inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a463698d9c8365241fba79de9baa2546a inherit pub_methods_classengine_1_1TaskBase" id="r_a463698d9c8365241fba79de9baa2546a"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="../../dc/d3f/namespaceengine.html#a0d5218b35f5861d406b7d3f8868d5cfd">TaskCancellationReason</a>&#160;</td><td class="memItemRight" valign="bottom"><b>CancellationReason</b> () const</td></tr>
<tr class="memdesc:a463698d9c8365241fba79de9baa2546a inherit pub_methods_classengine_1_1TaskBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets task cancellation reason. <br /></td></tr>
<tr class="separator:a463698d9c8365241fba79de9baa2546a inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d61c2d7a7abbf3b5eea91ab9be9ad77 inherit pub_methods_classengine_1_1TaskBase" id="r_a8d61c2d7a7abbf3b5eea91ab9be9ad77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a8d61c2d7a7abbf3b5eea91ab9be9ad77">BlockingWait</a> () const</td></tr>
<tr class="separator:a8d61c2d7a7abbf3b5eea91ab9be9ad77 inherit pub_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classengine_1_1TaskBase"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classengine_1_1TaskBase')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html">engine::TaskBase</a></td></tr>
<tr class="memitem:a2e51a9cc27fdc4afc79962adae60bacb inherit pub_static_methods_classengine_1_1TaskBase" id="r_a2e51a9cc27fdc4afc79962adae60bacb"><td class="memItemLeft" align="right" valign="top">
static const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>GetStateName</b> (<a class="el" href="../../d5/d4b/classengine_1_1TaskBase.html#a3263b3671eeab3f01a2e15e5dfcfd6cf">State</a> state)</td></tr>
<tr class="separator:a2e51a9cc27fdc4afc79962adae60bacb inherit pub_static_methods_classengine_1_1TaskBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A task that tries to acquire a distributed lock and runs user callback once while the lock is held. </p>
<p>When dist lock starts, the lock worker tries to take a lock in the loop. If succeeded, a task is launched that executes the user code. In the background, dist lock tries to extend the lock. In case of loss of the lock, the user task is canceled.</p>
<h2><a class="anchor" id="autotoc_md712"></a>
Example with retrying</h2>
<div class="fragment"><div class="line">  <span class="keyword">auto</span> strategy = GetSomeDistLockStrategyForTheSample();</div>
<div class="line">  std::atomic&lt;std::size_t&gt; counter = 0;</div>
<div class="line">  <a class="code hl_class" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html" title="A task that tries to acquire a distributed lock and runs user callback once while the lock is held.">dist_lock::DistLockedTask</a> locked_task(</div>
<div class="line">      <span class="stringliteral">&quot;example&quot;</span>,</div>
<div class="line">      [&amp;]() {</div>
<div class="line">        counter++;</div>
<div class="line">        <span class="keywordflow">if</span> (counter &lt; 5) {</div>
<div class="line">          <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">      },</div>
<div class="line">      strategy);</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="../../d1/db2/group__userver__utest.html#gafdf4f737b3561621eff19fb93f9c27fd">UEXPECT_NO_THROW</a>(locked_task.Get());</div>
<div class="line">  EXPECT_EQ(counter, 5);</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md713"></a>
Example without retrying</h2>
<div class="fragment"><div class="line">  <span class="keyword">auto</span> strategy = GetSomeDistLockStrategyForTheSample();</div>
<div class="line">  std::atomic&lt;std::size_t&gt; counter = 0;</div>
<div class="line">  <a class="code hl_class" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html" title="A task that tries to acquire a distributed lock and runs user callback once while the lock is held.">dist_lock::DistLockedTask</a> locked_task(</div>
<div class="line">      <span class="stringliteral">&quot;example&quot;</span>,</div>
<div class="line">      [&amp;]() {</div>
<div class="line">        counter++;</div>
<div class="line">        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;123&quot;</span>);</div>
<div class="line">      },</div>
<div class="line">      strategy, <span class="comment">/*default settings*/</span> {}, <a class="code hl_enumvalue" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8" title="waits until distlock becomes free">dist_lock::DistLockWaitingMode::kWait</a>,</div>
<div class="line">      <a class="code hl_enumvalue" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460af8fe6931a45bd59dec2b38cddcfb17d3" title="Don&#39;t retry on user exception/lock drop.">dist_lock::DistLockRetryMode::kSingleAttempt</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    locked_task.Get();</div>
<div class="line">    FAIL() &lt;&lt; <span class="stringliteral">&quot;Should have thrown&quot;</span>;</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; exception) {</div>
<div class="line">    EXPECT_EQ(exception.what(), std::string(<span class="stringliteral">&quot;123&quot;</span>));</div>
<div class="line">  }</div>
<div class="line">  EXPECT_EQ(counter, 1);</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/dc4/md_en_2userver_2periodics.html">Periodics and DistLocks</a> </dd>
<dd>
AlwaysBusyDistLockStrategy </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html#l00048">48</a> of file <a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">dist_locked_task.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="acebbf79897985008b6086473fe7a6795" name="acebbf79897985008b6086473fe7a6795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebbf79897985008b6086473fe7a6795">&#9670;&#160;</a></span>WorkerFunc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using dist_lock::DistLockedTask::WorkerFunc =  std::function&lt;void()&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html#l00050">50</a> of file <a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">dist_locked_task.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1f9b35564f90b9c20d7dd885196d6170" name="a1f9b35564f90b9c20d7dd885196d6170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9b35564f90b9c20d7dd885196d6170">&#9670;&#160;</a></span>DistLockedTask() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dist_lock::DistLockedTask::DistLockedTask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default constructor. Creates an invalid task. </p>

</div>
</div>
<a id="af36b6fc598efd16fc164878afcab92f1" name="af36b6fc598efd16fc164878afcab92f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af36b6fc598efd16fc164878afcab92f1">&#9670;&#160;</a></span>DistLockedTask() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dist_lock::DistLockedTask::DistLockedTask </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WorkerFunc&#160;</td>
          <td class="paramname"><em>worker_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt;&#160;</td>
          <td class="paramname"><em>strategy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1">DistLockWaitingMode</a>&#160;</td>
          <td class="paramname"><em>mode</em> = <code><a class="el" href="../../da/d4a/namespacedist__lock.html#ae2d407999a5d0d4a912cf3f3b912bfd1a0ee3f6e6cda68e5b4670f70c31130ec8">DistLockWaitingMode::kWait</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460">DistLockRetryMode</a>&#160;</td>
          <td class="paramname"><em>retry_mode</em> = <code><a class="el" href="../../da/d4a/namespacedist__lock.html#a5dda69e168a17bcbf10629f92b006460a7d38367a395df05d79abf44f3bd9f7cb">DistLockRetryMode::kRetry</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html" title="A task that tries to acquire a distributed lock and runs user callback once while the lock is held.">DistLockedTask</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of the task </td></tr>
    <tr><td class="paramname">worker_func</td><td>a callback that is started once we've acquired the lock and is cancelled when the lock is lost. </td></tr>
    <tr><td class="paramname">settings</td><td>distributed lock settings </td></tr>
    <tr><td class="paramname">strategy</td><td>distributed locking strategy </td></tr>
    <tr><td class="paramname">mode</td><td>distributed lock waiting mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><code>worker_func</code> must honour task cancellation and stop ASAP when it is cancelled, otherwise brain split is possible (IOW, two different users do work assuming both of them hold the lock, which is not true). </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acc079215569b5563f890e7143990b110" name="acc079215569b5563f890e7143990b110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc079215569b5563f890e7143990b110">&#9670;&#160;</a></span>GetLockedDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; std::chrono::steady_clock::duration &gt; dist_lock::DistLockedTask::GetLockedDuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns for how long the lock is held (if held at all). Returned value may be less than the real duration. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/dist_lock/<a class="el" href="../../d2/d92/dist__locked__task_8hpp_source.html">dist_locked_task.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/d4a/namespacedist__lock.html">dist_lock</a></li><li class="navelem"><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html">DistLockedTask</a></li>
    <li class="footer">Generated on Wed Oct 4 2023 12:20:26 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.9.8</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/> 
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_header();
      addLinks();
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons(); // TODO: code style?
    }, 0);
    });
  });
</script>
</body>
</html>
